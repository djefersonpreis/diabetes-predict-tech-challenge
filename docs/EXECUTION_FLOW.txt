                        ğŸ”„ FLUXO DETALHADO DE EXECUÃ‡ÃƒO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    FASE 1: INICIALIZAÃ‡ÃƒO DOS CONTAINERS
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    docker-compose up -d
           â”‚
           â”œâ”€â–º ğŸ”¨ Build da imagem API (Dockerfile.api)
           â”‚   â”œâ”€ Python 3.9-slim
           â”‚   â”œâ”€ Instalar dependÃªncias (requirements.txt)
           â”‚   â””â”€ Copiar cÃ³digo fonte
           â”‚
           â”œâ”€â–º ğŸ”¨ Build da imagem Dashboard (Dockerfile.dashboard)  
           â”‚   â”œâ”€ Python 3.9-slim
           â”‚   â”œâ”€ Instalar dependÃªncias (requirements.txt)
           â”‚   â””â”€ Copiar cÃ³digo fonte
           â”‚
           â”œâ”€â–º ğŸš€ Iniciar Container API (diabetes-api)
           â”‚   â”œâ”€ Port mapping: 8000:8000
           â”‚   â”œâ”€ Volume: ./data:/app/data
           â”‚   â”œâ”€ Volume: ./models:/app/models
           â”‚   â””â”€ Command: uvicorn src.api.main:app --host 0.0.0.0
           â”‚
           â””â”€â–º ğŸ“Š Iniciar Container Dashboard (diabetes-dashboard)
               â”œâ”€ Port mapping: 8501:8501
               â”œâ”€ Volume: ./data:/app/data
               â”œâ”€ Volume: ./models:/app/models
               â””â”€ Command: streamlit run src/dashboard/app.py

    â±ï¸  Tempo estimado: 2-3 minutos (primeira execuÃ§Ã£o)

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    FASE 2: PIPELINE DE DADOS (Primeira ExecuÃ§Ã£o)
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    Executar: make pipeline  ou  docker-compose exec api python run_pipeline.py

    2.1 ğŸ“¥ COLETA DE DADOS (DataCollector)
        â”‚
        â”œâ”€â–º ğŸŒ Tentativa de download do Kaggle
        â”‚   URL: kaggle.com/datasets/.../diabetes-health-indicators-dataset
        â”‚   
        â”œâ”€â–º ğŸ“¦ Se sucesso: ExtraÃ§Ã£o do ZIP â†’ CSV
        â”‚   â””â”€ diabetes_health_indicators.csv
        â”‚   
        â”œâ”€â–º ğŸ² Se falha: GeraÃ§Ã£o de dados sintÃ©ticos
        â”‚   â””â”€ Criar 1000 registros de exemplo
        â”‚   
        â””â”€â–º ğŸ’¾ Armazenamento no SQLite
            â””â”€ Tabela: raw_data (22 colunas)

    â±ï¸  Tempo: 30-60 segundos

    2.2 ğŸ”§ PROCESSAMENTO (DataProcessor)
        â”‚
        â”œâ”€â–º ğŸ“‹ Carregar dados brutos
        â”‚   â””â”€ SELECT * FROM raw_data
        â”‚
        â”œâ”€â–º ğŸ§¹ Limpeza de dados
        â”‚   â”œâ”€ Remover valores nulos
        â”‚   â”œâ”€ Converter diabetes para binÃ¡rio (0/1)
        â”‚   â””â”€ Tratar outliers no BMI
        â”‚
        â”œâ”€â–º ğŸ¯ SeleÃ§Ã£o de features principais
        â”‚   â””â”€ 12 features: highbp, highchol, bmi, smoker, etc.
        â”‚
        â”œâ”€â–º ğŸ”¢ NormalizaÃ§Ã£o da idade
        â”‚   â””â”€ Mapear categorias para idades aproximadas
        â”‚
        â””â”€â–º ğŸ’¾ Salvar dados processados
            â””â”€ Tabela: processed_data

    â±ï¸  Tempo: 20-30 segundos

    2.3 ğŸ¤– TREINAMENTO ML (DiabetesMLModel)
        â”‚
        â”œâ”€â–º ğŸ“Š Carregar dados processados
        â”‚   â””â”€ SELECT * FROM processed_data
        â”‚
        â”œâ”€â–º ğŸ”€ DivisÃ£o treino/teste (80/20)
        â”‚   â””â”€ EstratificaÃ§Ã£o por classe
        â”‚
        â”œâ”€â–º ğŸŒ² Treinamento Random Forest
        â”‚   â”œâ”€ n_estimators=100
        â”‚   â”œâ”€ max_depth=10
        â”‚   â”œâ”€ min_samples_split=5
        â”‚   â””â”€ random_state=42
        â”‚
        â”œâ”€â–º âœ… ValidaÃ§Ã£o e mÃ©tricas
        â”‚   â”œâ”€ AcurÃ¡cia
        â”‚   â”œâ”€ PrecisÃ£o
        â”‚   â”œâ”€ Recall
        â”‚   â””â”€ F1-Score
        â”‚
        â”œâ”€â–º ğŸ’¾ Persistir modelo
        â”‚   â”œâ”€ models/diabetes_model.joblib
        â”‚   â”œâ”€ models/scaler.joblib
        â”‚   â””â”€ models/feature_names.joblib
        â”‚
        â””â”€â–º ğŸ“ˆ Salvar mÃ©tricas
            â””â”€ Tabela: model_metrics

    â±ï¸  Tempo: 1-2 minutos

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    FASE 3: OPERAÃ‡ÃƒO PRODUTIVA
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    3.1 ğŸš€ API FASTAPI (Container: diabetes-api)
        â”‚
        â”œâ”€â–º ğŸŒ Servidor HTTP ativo em localhost:8000
        â”‚
        â”œâ”€â–º ğŸ“‹ Endpoints disponÃ­veis:
        â”‚   â”œâ”€ GET  /                  â†’ Info da API
        â”‚   â”œâ”€ POST /collect-data      â†’ Coletar dados
        â”‚   â”œâ”€ POST /process-data      â†’ Processar dados  
        â”‚   â”œâ”€ POST /train-model       â†’ Treinar modelo
        â”‚   â”œâ”€ POST /predict           â†’ Fazer prediÃ§Ã£o
        â”‚   â”œâ”€ GET  /model-info        â†’ Info do modelo
        â”‚   â”œâ”€ GET  /data-stats        â†’ EstatÃ­sticas
        â”‚   â””â”€ GET  /health            â†’ Health check
        â”‚
        â””â”€â–º ğŸ“š DocumentaÃ§Ã£o automÃ¡tica:
            â”œâ”€ /docs     â†’ Swagger UI
            â””â”€ /redoc    â†’ ReDoc

    3.2 ğŸ“Š DASHBOARD STREAMLIT (Container: diabetes-dashboard)
        â”‚
        â”œâ”€â–º ğŸŒ Servidor Web ativo em localhost:8501
        â”‚
        â””â”€â–º ğŸ“± PÃ¡ginas disponÃ­veis:
            â”œâ”€ ğŸ“Š VisÃ£o Geral     â†’ Status e estatÃ­sticas
            â”œâ”€ ğŸ“¥ Coleta Dados    â†’ Interface de coleta
            â”œâ”€ ğŸ“ˆ AnÃ¡lise Explor  â†’ GrÃ¡ficos e correlaÃ§Ãµes
            â”œâ”€ ğŸ¤– Modelo ML       â†’ Info e mÃ©tricas
            â””â”€ ğŸ¯ PrediÃ§Ã£o        â†’ Interface interativa

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    FLUXO DE PREDIÃ‡ÃƒO EM TEMPO REAL
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

    UsuÃ¡rio acessa Dashboard â†’ PÃ¡gina "PrediÃ§Ã£o"
           â”‚
           â”œâ”€â–º ğŸ“ Preenche formulÃ¡rio:
           â”‚   â”œâ”€ Idade: 45 anos
           â”‚   â”œâ”€ Sexo: Masculino  
           â”‚   â”œâ”€ BMI: 30.0
           â”‚   â”œâ”€ PressÃ£o Alta: Sim
           â”‚   â”œâ”€ Colesterol Alto: Sim
           â”‚   â””â”€ ... (outras 7 features)
           â”‚
           â”œâ”€â–º ğŸ”„ Submit â†’ API Request
           â”‚   POST /predict
           â”‚   {
           â”‚     "age": 45,
           â”‚     "sex": 1,
           â”‚     "bmi": 30.0,
           â”‚     "highbp": 1,
           â”‚     ...
           â”‚   }
           â”‚
           â”œâ”€â–º ğŸ¤– Processamento na API:
           â”‚   â”œâ”€ Carregar modelo treinado
           â”‚   â”œâ”€ Converter idade para categoria
           â”‚   â”œâ”€ Aplicar modelo Random Forest
           â”‚   â”œâ”€ Calcular probabilidades
           â”‚   â””â”€ Determinar nÃ­vel de risco
           â”‚
           â”œâ”€â–º ğŸ“Š Resposta da API:
           â”‚   {
           â”‚     "prediction": 1,
           â”‚     "probability": {
           â”‚       "nÃ£o_diabÃ©tico": 0.25,
           â”‚       "diabÃ©tico": 0.75
           â”‚     },
           â”‚     "risk_level": "Alto"
           â”‚   }
           â”‚
           â””â”€â–º ğŸ¯ ExibiÃ§Ã£o no Dashboard:
               â”œâ”€ âš ï¸ "Risco de Diabetes Detectado"
               â”œâ”€ ğŸ“ˆ GrÃ¡fico de probabilidades  
               â”œâ”€ ğŸ¯ NÃ­vel de risco: Alto (75%)
               â””â”€ ğŸ’¡ RecomendaÃ§Ãµes personalizadas

    â±ï¸  Tempo de resposta: < 1 segundo

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            ğŸ› ï¸  COMANDOS DE MANUTENÃ‡ÃƒO

    ğŸ“Š Monitoramento:
       docker-compose logs -f              # Logs em tempo real
       docker-compose ps                   # Status containers
       make status                         # Status resumido

    ğŸ”§ ManutenÃ§Ã£o:
       make pipeline                       # Re-executar pipeline
       make restart                        # Reiniciar serviÃ§os  
       make shell-api                      # Acessar container API
       make clean                          # Limpeza completa

    ğŸ§ª Testes:
       curl http://localhost:8000/health   # Testar API
       make test-api                       # Teste automatizado

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•